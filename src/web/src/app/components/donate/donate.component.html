<ng-template #$payForm>
  <div class="gird">
    <label>打赏金额:</label>
    <div class="amount">
      <input type="number"
             step="0.01"
             [value]="amount|number:'.2-2'"
             (change)="amount=$event.target.value">
      <div class="rand"
           (click)="rand()">随机金额</div>
    </div>
    <label>选择支付方式:</label>
    <div>
      <label>
        <input type="radio"
               name="payment"
               [(ngModel)]="payment"
               [value]="Payment.AliPay">支付宝
      </label>
      <label>
        <input type="radio"
               name="payment"
               [(ngModel)]="payment"
               [value]="Payment.WeiChatPay">微信
      </label>
      <br>
      <label>
        <input type="radio"
               name="payment"
               [(ngModel)]="payment"
               [value]="Payment.PayPal">PayPal
      </label>
    </div>
    <button class="btn"
            (click)="pay();$event.target.disabled=true">立即支付</button>
  </div>
</ng-template>
<div class="waitPay"
     *ngIf="waitPay$|async as check;else $payForm">

  <ng-container *ngIf="check.isExist;else $wait">
    <div>支付完成</div>
    <div>谢谢您的支持</div>
  </ng-container>
  <ng-template #$wait>
    <ng-container *ngIf="qrImg;else $msg">
      <img [src]="qrImg">
      <div>请扫描二维码支付</div>
      <div>等待支付...</div>
    </ng-container>
    <ng-template #$msg>
      <div class="msg">
        请在新打开的浏览器窗口支付
      </div>
      <div>等待支付...</div>
    </ng-template>
  </ng-template>
</div>